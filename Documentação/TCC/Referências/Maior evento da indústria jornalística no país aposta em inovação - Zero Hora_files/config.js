var sas=sas||{};sas.utils=sas.utils||{},sas.events=sas.events||{},function(){sas.utils.getIEVersion=function(){var a=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return a?parseInt(a[1]):void 0},sas.events.addEvent=function(a,e,t){return a&&e&&t?(a.attachEvent?a.attachEvent("on"+e,t):a.addEventListener&&a.addEventListener(e,t,!1),{removeEvent:function(){a.detachEvent?a.detachEvent("on"+e,t):a.removeEventListener&&a.removeEventListener(e,t,!1)}}):void 0},sas.events.addLoadEvent=function(a,e){if(a&&e){var t="load",n=function(){return!0},r=sas.utils.getIEVersion();(11>r||a==document)&&(t="readystatechange",n=function(){return a.readyState&&"complete"!=a.readyState&&"loaded"!=a.readyState?void 0:!0});var s=sas.events.addEvent(a,t,function(){n()&&(s.removeEvent(),e.apply(this,arguments))})}}}(),function(){var a=function(){},e=!1,t=function(){return Math.round(1e10*Math.random())},n="http://www.smartadserver.com",r=t(),s=!0,i=encodeURIComponent,d=0,o=!1,c=0,l=!1,u=null,f={},p={},g=[],m={},v=!0,h={};sas.callType={STD:"std",IFRAME:"iframe",ONECALL:"onecall",XML:"xml",PASSBACK:"passback"},sas.renderMode={DEFAULT:0,READY:1,ON_DEMAND:2};var I=!1,y=[],w=function(a){var e=function(){if(y.length>0){I=!0;var a=y.shift(),t=a.options.onLoad;a.options.onLoad=function(a){e(),t(a)},E[a.type](a.ad,a.options)}else I=!1};y.push(a),I||e()},E={},A={onLoad:a,onError:a,onClean:a,beforeRender:a};E[sas.callType.STD]=function(a,e){R(a.tagId,{ad:a,callType:sas.callType.STD,options:e,url:B(sas.callType.STD,a,e),type:"script"}),P(a.tagId)},E[sas.callType.IFRAME]=function(a,e){R(a.tagId,{ad:a,callType:sas.callType.IFRAME,options:e,url:B(sas.callType.IFRAME,a,e),type:"iframe",width:a.width||0,height:a.height||0}),P(a.tagId)},E[sas.callType.ONECALL]=function(a,e){for(var t=(""+a.formatId).replace(/\s/g,"").split(","),n=0;n<t.length;n++){var r=t[n],s="sas_"+r;R(s,{ad:a,callType:sas.callType.ONECALL,options:e}),R(s,{ad:{tagId:s,formatId:r,originalFormatId:r}})}var i=B(sas.callType.ONECALL,a,e);D(document.getElementsByTagName("head")[0],i,e.async,function(){if(v){for(var a in h)P(a);h={}}},e.onError)};var T={ERR_SITE:"invalid site id",ERR_PAGE:"invalid page id or name",ERR_FORMAT:"invalid format id",ERR_CONFIG:"invalid configuration",ERR_CALL:"invalid call option"},L=function(a){throw new Error(a)};Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var _=function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t&&"object"==typeof t)for(var n in t)null!=t[n]&&(Array.isArray(t[n])?a[n]=t[n]:"object"==typeof t[n]?a[n]=_({},a[n],t[n]):a[n]=t[n])}return a},M=function(a){a=""+a;var e=f[a]||f["sas_"+a]||f[p[a]];if(e)return e;var t=a.split("_"),n=t.slice(0,t.length-1).join("");if(t.length>1&&!isNaN(t[t.length-1])&&(e=f[n]||f["sas_"+n])){var r="sas_"+a;return R(r,e,{ad:{tagId:r,instance:parseInt(t[t.length-1])}})}return null},R=function(a){var e=Array.prototype.slice.call(arguments,1);return f[a]=_.apply(this,[{},f[a]].concat(e)),f[a]},N=function(a){return a.siteId?"siteid="+a.siteId:(L(T.ERR_SITE),"")},S=function(a){return a.pageId?"pgid="+a.pageId:a.pageName?"pgname="+a.pageName:(L(T.ERR_PAGE),"")},C=function(a){return a.formatId?"fmtid="+a.formatId:(L(T.ERR_FORMAT),"")},O=function(a){var e=document.createElement("div");return e.id=a,e},b=function(a,e,t,n){var r=document.createElement("iframe");r.id="sas_i"+e.ad.formatId+(e.ad.instance?"_"+e.ad.instance:""),r.scrolling="no",r.frameBorder=0,r.width=e.width,r.height=e.height,r.style.margin=0,r.style.padding=0,r.style.width=e.width+"px",r.style.height=e.height+"px",r.src=e.url,sas.events.addLoadEvent(r,t),sas.events.addEvent(r,"error",n),e.options.async?a.appendChild(r):document.write(r.outerHTML)},x=1,F=function(a,e,t){var n=document.createElement("script");n.id="sas_script"+x++,n.type="text/javascript",n.text=e,t?a.appendChild(n):document.write(n.outerHTML)},D=function(a,e,t,n,r){var s=document.createElement("script");s.id="sas_script"+x++,s.type="text/javascript",s.src=e,s.async=t,sas.events.addLoadEvent(s,n),sas.events.addEvent(s,"error",r),t?a.appendChild(s):document.write(s.outerHTML)},U=function(a){var e=navigator.userAgent.indexOf("iPad")>0,t=""+navigator.userAgent.indexOf("iPhone")>0;return e||t?e?"ipad":"iphone":navigator.userAgent.indexOf("Android")>0?"android":""},B=function(a,e,i){return i=_({forceMasterFlag:!1},i),s=i.forceMasterFlag?!0:s,r=i.resetTimestamp?t():r,a==sas.callType.ONECALL&&H(),sas.utils.buildUrl(n,a,e,j(),r,i.async,d,U(),u,window.location.origin)},j=function(){return"visit="+(H()?"m":"s")},H=function(){return s?(s=!1,!0):!1},k=function(a){var e=document.getElementById(a);return e||(document.write(O(a).outerHTML),e=document.getElementById(a)),e},P=function(e,t){var n=M(e);if(n){var r=n.ad.formatId+(n.ad.instance>1?"_"+n.ad.instance:"");if(n.options.async&&(!v||n.callType==sas.callType.ONECALL&&!sas_manager))return void(h[n.ad.tagId]=!0);sas.clean(n.ad.tagId),n.options.beforeRender({formatId:r,tagId:n.ad.tagId}),n.callType===sas.callType.ONECALL&&(n=J(n.ad.tagId));var s=function(){(t||a)(),n.options.onLoad({formatId:r,tagId:n.ad.tagId})},i=function(){n.options.onError({formatId:r,tagId:n.ad.tagId})};if(n.callType==sas.callType.ONECALL&&!sas_manager.exists(r))return sas.noad(n.ad.formatId),void s();var d=document.getElementById(n.ad.tagId);if(d)switch(n.type){case"iframe":b(d,n,s,i);break;case"script":D(d,n.url,n.options.async,s,i);break;case"passback":sas.passback({formatId:n.ad.formatId,chain:n.chain});break;default:throw new Error("Unsupported script type "+n.type)}}},G=[],Y=function(a){null!=a&&G.push(a)};sas.events.addLoadEvent(document,function(){e=!0,G.push=function(a){a()};for(var a=0;a<G.length;a++)G[a]()});var V=!1,q=function(){V||(V=!0,Y(function(){sas.render()}))},z=!1;sas.setup=function(a){if(z)throw new Error("sas.setup can only be called once");z=!0,a=a||{},n=a.domain||n,o=a.async||o,sas_ajax=o,d=a.networkid||d,c=a.renderMode||c,v=c==sas.renderMode.DEFAULT,l=a.inSequence||l,u=a.uid,window.sas_renderMode=c},sas.call=function(e,t,n){if(!z)throw new Error("sas has not been initialized. 'sas.setup' must be called first");if(t.siteId=t.siteId||t.siteid,t.pageId=t.pageId||t.pageid,t.pageName=t.pageName||t.pagename,t.formatId=t.formatId||t.formatid,n=_({},A,{async:o},n),!E[e])throw new Error("Unsupported call type "+e);if(!t||!t.siteId||!t.pageId&&!t.pageName||!t.formatId)throw new Error("Missing parameter(s)");t.passback||g.push({callType:e,ad:t,options:n}),e!=sas.callType.ONECALL&&(t.tagId=t.tagId||"sas_"+t.formatId,t.originalFormatId=t.originalFormatId||t.formatId,k(t.tagId),p[t.formatId]||(p[t.formatId]=t.tagId)),n.async&&c==sas.renderMode.READY&&q();var r=n.onLoad;n.onLoad=function(e){var t=M(e.tagId),n=document.getElementById(t.ad.tagId);if(n){var s=n.childNodes.length>1;(window.sas_loadHandler||a)({id:t.ad.formatId,hasAd:s}),r({formatId:t.ad.formatId,tagId:t.ad.tagId,hasAd:s})}},n.async&&l?w({type:e,ad:t,options:n}):E[e](t,n)},sas.passback=function(a){m[a.formatId]={current:-1,ad:a},sas.next(a.formatId)},sas.next=function(a){var e=M(a),t=m[e.ad.formatId];if(e&&t){var n=document.getElementById(e.ad.tagId);if(n&&(n.innerHTML=""),t.current>=0){var r=new Image;r.src=t.ad.chain[t.current].noadUrl}t.current++,t.current<t.ad.chain.length&&(t.ad.chain[t.current].countUrl&&((new Image).src=t.ad.chain[t.current].countUrl),t.ad.chain[t.current].script?F(n,t.ad.chain[t.current].script,e.options.async):D(n,t.ad.chain[t.current].scriptUrl,e.options.async))}};var K={forceMasterFlag:!1,resetTimestamp:!0,target:void 0};sas.refresh=function(e,n){if(v){n=_({},K,e,n);var i=a;if(arguments.length<=1&&"string"!=typeof e&&isNaN(e)){h={};for(var d in f)h[d]=!0;i=function(a){for(var e=0;e<g.length;e++)g[e].options.async&&(void 0!==a&&null!==a&&(g[e].ad.target=a),E[g[e].callType](g[e].ad,g[e].options))}}else{var d=M(e);if(!d||!d.options.async)return;i=function(a){void 0!==a&&null!==a&&(d.ad.target=a),E[sas.callType.STD](d.ad,d.options)}}s=n.forceMasterFlag?!0:s,r=n.resetTimestamp?t():r,i(n.target)}},sas.getTag=function(a){var e=M(a);return e?document.getElementById(e.ad.tagId):null},sas.clean=function(a){var e=[];if(0==arguments.length)for(var t in f)e.push(t);else{var t=M(a);t&&e.push(t.ad.tagId)}for(var n=0;n<e.length;n++){var a=e[n],t=M(a),r=document.getElementById(t.ad.tagId);t.options.onClean(t.ad.formatId,r),Q[a]&&Q[a](),r&&(r.innerHTML="")}},sas.noad=function(a){sas_manager&&sas_manager.noad(a)},sas.render=function(a){var t=[];if(0==arguments.length){if(!o&&e)throw new Error("Can't call render once page is loaded");if(v||!(c==sas.renderMode.READY&&e||c==sas.renderMode.ON_DEMAND))return;v=!0;for(var n in h)t.push(n);h={}}else{var n=M(a);if(!n)return;if(!n.options.async&&e)throw new Error("Can't render sync tag ("+n.ad.tagId+") once page is loaded");t.push(n.ad.tagId),k(n.ad.tagId)}for(var r=0;r<t.length;r++)P(t[r])},sas.utils.buildUrl=function(a,e,t,n,r,s,d,o,c,l){var u=a+"/ac?";return null!=d&&(u+="nwid="+d+"&"),u+=N(t)+"&"+S(t)+"&"+C(t),e==sas.callType.IFRAME&&(u+="&out=iframe"),s&&(u+="&async=1"),u+=e!=sas.callType.ONECALL?"&"+n:"&oc=1",u+="&tmstp="+r,o.length>0&&(t.target&&t.target.length>0&&(t.target+=";"),t.target+="platform="+o),t.target&&(u+="&tgt="+i(t.target)),e!=sas.callType.ONECALL&&(u+="&orgfmtid="+t.originalFormatId,u+="&tag="+t.tagId),c&&(u+="&uid="+c),l&&(u+="&pgDomain="+encodeURI(l)),u};var W=function(a,e,t){var n=a.indexOf("/");if(0>n)throw new Error("Invalid argument : sas_pageid");this.siteId=a.substring(0,n);var r=a.substring(n+1);0==r.indexOf("(")&&r.indexOf(")")==r.length-1&&(r=r.slice(1,r.length-1));var s=parseInt(r);s+""==r?this.pageId=s:this.pageName=r,this.formatId=e,this.target=t};window.sas_ads=sas,window.sas_ajax=!1,window.sas_manager=null,window.sas_unrenderedFormats=[],window.sas_callAd=sas.callAd,window.sas_callAds=sas.callAds,sas.callAd=sas.refresh,sas.callAds=function(){v?sas.refresh():sas.render()},sas.cleanAd=sas.clean,sas.cleanAds=sas.clean;var X=function(a){var e=document.createElement("div");e.innerHTML="_"+a;var t=e.childNodes[1];return{type:t.tagName.toLowerCase(),url:t.src,width:t.width||0,height:t.height||0}},J=function(a){var e=M(a);if(!e)return null;var t=e.ad.formatId+(e.ad.instance>1?"_"+e.ad.instance:"");if(sas_manager&&sas_manager.exists(t)){var n,r=sas_manager.formats["f"+t];n=e.options.async||r.chain?{type:r.scriptType(),url:r.scriptSrc(),chain:r.chain,width:"iframe"==r.scriptType()?r.scriptWidth():0,height:"iframe"==r.scriptType()?r.scriptHeight():0}:X(r.scriptURL()),e=R(e.ad.tagId,n)}return e};window.sas_render=function(a,e,t,n,r){J(a),sas.render(a)},window.SmartAdServerAjaxOneCall=function(a,e){J(e),sas.render(e)},window.SmartAdServer_iframe=function(a,e,t,n,r){var s=new W(a,e,t);s.width=n,s.height=r,sas.call("iframe",s)},window.SmartAdServer=function(a,e,t){var n=new W(a,e,t);sas.call(sas.callType.STD,n)},window.SmartAdServerAjax=SmartAdServer,window.sas_gcf=function(a){return document.getElementById("sas_"+a)},window.sas_appendToContainer=function(a,e){var t=document.getElementById("sas_"+a);if(t){if("string"==typeof e){var n=document.createElement("div");n.innerHTML=e,e=n}t.appendChild(e)}},window.sascc=function(a,e){var t=new Image;t.src=n+"/h/mcp?imgid="+a+"&pgid="+e+"&uid=[uid]&tmstp="+r+"&tgt=[targeting]"},window.sasmobile=function(a,e,t){var n=new W(a,e,t);sas.call(sas.callType.STD,n)};var Q={};window.sas_addCleanListener=function(a,e){Q[a]=e},window.sas_cleanAds=sas.clean,window.sas_cleanAd=sas.clean,sas.cmd=sas.cmd||[],sas.cmd.push=function(a){a()};for(var Z=0;Z<sas.cmd.length;Z++)sas.cmd[Z]()}();
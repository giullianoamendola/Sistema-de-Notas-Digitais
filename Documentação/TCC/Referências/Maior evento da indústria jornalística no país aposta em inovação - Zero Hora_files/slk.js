(function(b){b.RBS=b.RBS||{};var a=b.RBS;a.LocalStorageComponent=function(){this.init()};a.LocalStorageComponent.prototype.init=function(){this.isAvailable=false;this.checkLocalStorage()};a.LocalStorageComponent.prototype.checkLocalStorage=function(){this.isAvailable=!!b.localStorage};a.LocalStorageComponent.prototype.store=function(c,d){if(arguments.length===1){if(typeof c==="string"){this.storeString("slk-data",d)}}if(arguments.length===2&&d!==undefined){if(typeof c==="string"&&typeof d==="string"){this.storeString(c,d)}}};a.LocalStorageComponent.prototype.storeString=function(c,d){c=c||"slk-data";if(this.isAvailable){b.localStorage.setItem(c,d)}};a.LocalStorageComponent.prototype.getData=function(d){var c=null;d=d||"slk-data";if(this.isAvailable){c=b.localStorage.getItem(d)}return c};a.LocalStorageComponent.prototype.clear=function(){if(this.isAvailable){b.localStorage.clear()}};a.LocalStorageComponent.prototype.removeItem=function(c){if(this.isAvailable){b.localStorage.removeItem(c)}};a.LocalStorageComponent.prototype.getAll=function(){var c={};if(this.isAvailable){c=b.localStorage}return c}}(window));(function(b){b.RBS=b.RBS||{};b.SCRIPT_CLASS="slk-API";var a=b.RBS;a.Slk=function(d){this.options=this.validateOptions(d);var c=(b.location.pathname==="/rs/busca/"),e=(this.options&&this.options.trackUnlogged&&c);if(e||this.getUsername().replace(/^\s+|\s+$/g,"")!==""){this.init()}};a.Slk.prototype.validateOptions=function(c){var d=this.config,e;for(e in c){d[e]=c[e]}if(!d.storageInterval){d.storageInterval=10000}if(!d.saveTimeout){d.saveTimeout=30000}if(!d.timeTestUrl){d.timeTestUrl="/open"}if(!d.trackComments){d.trackComments=true}if(!d.trackShares){d.trackShares=true}d.trackUnlogged=c.trackUnlogged?true:false;return d};a.Slk.prototype.init=function(){this.use_xdomain=false;var c=this;this.defineAjaxComponent(function(){c.initialTime=new Date().getTime();c.URL=c.config.SERVER_HOST+":"+c.config.SERVER_PORT;c.username=c.getUsername();c.configEventBind();c.setLocalStorage();c.configFirstData();c.configPeriodic();c.documentLoaded=false;c.videosToSendData=[];c.checkNotSent();if(c.config.trackVideos){c.bindEvents()}})};a.Slk.prototype.bindEvents=function(){var e=this,d=b.addEventListener?"addEventListener":"attachEvent",c=d==="attachEvent"?"onmessage":"message";b[d](c,function(g){if(g.data.match("sherlock-video-loaded:")){var f=g.data.replace("sherlock-video-loaded:","");if(e.documentLoaded){e.configEmbeddedVideos(f)}else{e.videosToSendData.push(f)}}},false);$(document).ready(function(){e.documentLoaded=true;if(e.videosToSendData.length){e.sendDataToEmbeddedVideos()}})};a.Slk.prototype.bindEmbeddedVideos=function(c){if(c.data==="sherlock-video:loaded"){this.videoIframesCount--;if(this.videoIframesCount===0){this.configEmbeddedVideos()}}};a.Slk.prototype.configFirstData=function(){var c=this.options&&this.options.trackUnlogged;if(c||this.username!==""){this.sendEventData("open",{type:"open"})}};a.Slk.prototype.configEventBind=function(){if(this.options.trackShares){this.bindShareButtons()}};a.Slk.prototype.sendDataToEmbeddedVideos=function(){var c=this.videosToSendData.length,d;for(d=0;d<c;d++){this.configEmbeddedVideos(this.videosToSendData[d])}this.videosToSendData=[]};a.Slk.prototype.configEmbeddedVideos=function(f){if(this.config.trackVideos&&f){var e=this,d=$('iframe[src^="'+f+'"]'),g,c=d.length,h;for(g=0;g<c;g++){h="sherlock:"+JSON.stringify({parameters:{newsDetails:{newsId:e.getNewsId()},product:{name:e.getSiteName(),subproduct:e.getSiteProduct()}},url:document.URL});d[g].contentWindow.postMessage(h,d[g].src)}}};a.Slk.prototype.setUserData=function(d){var c;if(d){c=JSON.parse(d)}else{c=b.response}if(c&&c.statusCode===0){this.userId=c.content.id}};a.Slk.prototype.setLocalStorage=function(){this.localStorage=new a.LocalStorageComponent()};a.Slk.prototype.configPeriodic=function(){var d=this,c=this.options.storageInterval;this.interval=b.setInterval(function(){d.iteratePeriodicRequest()},c)};a.Slk.prototype.iteratePeriodicRequest=function(){var c=this.getElapsedTime(),e,d,f=this.getUserId();if(f){d=new Date().getTime();e=c+"&"+d;this.localStorage.store("setime"+f,e)}};a.Slk.prototype.checkNotSent=function(){var j,f,h="",g,d=false,e,c;j=this.localStorage.getAll();e=new Date().getTime();for(f in j){d=false;if(f.substr(0,6)==="setime"){c=j[f].split("&");d=true}if(d&&c&&c.length===2){g=e-c[1];if(g>this.options.saveTimeout){h+=f.substr(6,f.length-1)+"="+c[0]+"&";this.localStorage.removeItem(f)}}}if(h.length!==0){h=h.substr(0,h.length-2);this.sendDataByHttp(this.URL+"/exit",h)}}}(window));(function(b){var a=b.RBS;a.Slk.prototype.config={SERVER_HOST:"https://slk.clicrbs.com.br",SERVER_PORT:443,storageInterval:2000,saveTimeout:10000,timeTestUrl:"/open",trackComments:true,trackVideos:true}}(window));(function(b){var a=b.RBS;a.Slk.prototype.includeXDomainScript=function(d){var c=document.createElement("script");this.use_xdomain=true;c.src="http://zh.clicrbs.com.br/it/js/slk/xdomain.js";c.setAttribute("slave",this.config.SERVER_HOST+":"+this.config.SERVER_PORT+"/proxy.html");document.getElementsByTagName("head")[0].appendChild(c);if(c.readyState){c.onreadystatechange=function(){if(c.readyState==="loaded"||c.readyState==="complete"){c.onreadystatechange=null;b.xhook.disable();d()}}}else{c.onload=function(){d()}}};a.Slk.prototype.isIE=function(){var e=-1,c,d;if(b.navigator.appName==="Microsoft Internet Explorer"){c=b.navigator.userAgent;d=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");if(d.test(c)!==null){e=parseFloat(RegExp.$1)}}return e};a.Slk.prototype.defineAjaxComponent=function(d){var c=this.isIE();if(c===-1||c>9){d()}else{this.includeXDomainScript(d)}}}(window));(function(b){var a=b.RBS;a.Slk.prototype.find=function(d){var c=this.getElements(d);return c};a.Slk.prototype.setResponseObj=function(d){var c=this;d.find=function(e){return c.getElements(e,d)};return d};a.Slk.prototype.isList=function(d){var c=false;if(d&&d[0]&&typeof d!=="string"){c=true}return c};a.Slk.prototype.addEvent=function(e,c,f){var d;if(this.isList(e)){d=e}else{d=this.query(e)}if(d){if(d.hasOwnProperty("length")&&d.length>0){this.addEventOnElements(d,c,f)}else{if(!d.hasOwnProperty("length")){this.addEventOnElements([d],c,f)}}}};a.Slk.prototype.removeEvent=function(e,c){var d=this.query(e);if(d){if(d.hasOwnProperty("length")&&d.length>0){this.removeElementEvents(d,c)}else{if(!d.hasOwnProperty("length")){this.removeElementEvents([d],c)}}}};a.Slk.prototype.getElements=function(f,e){var d=[],c=[];e=e||document;if(this.isList(e)){c=this.getElementsFromList(e,f,d);d=c}else{d.push(this.query(f,e))}d=this.setResponseObj(d);return d};a.Slk.prototype.query=function(e,c){c=typeof c==="string"?document.querySelector(c):c;var d=e?(c||document).querySelectorAll(e):undefined;if(typeof e==="string"&&e.match(/#/)&&d.length===1){return d[0]}return d};a.Slk.prototype.getElementsFromList=function(h,g,c){var f=0,d=0,e;c=c||[];while(h[f]){if(this.isList(h[f])){while(h[f][d]){e=this.query(g,h[f][d]);if(e[0]){c.push(e)}d++}}else{c.push(this.query(g,h[f]))}f++}c=this.filterElements(c);return c};a.Slk.prototype.filterElements=function(f){var e,d,c=[];for(e in f){if(this.isList(f[e])){for(d in f[e]){e=parseInt(e,10);d=parseInt(d,10);if(f[e][d]){c.push(f[e][d])}}}}return c};a.Slk.prototype.addEventOnElements=function(f,e,h){e=b.addEventListener?e:"on"+e;var d,c=f.length,g=b.addEventListener?"addEventListener":"attachEvent";for(d=0;d<c;d++){if(f[d][g]){f[d][g](e,h,false)}}};a.Slk.prototype.removeElementEvents=function(f,e,g){var d,c=f.length;for(d=0;d<c;d++){if(f[d].removeEventListener){f[d].removeEventListener(e,g,false)}}};a.Slk.prototype.getCookie=function(f){if(document&&document.cookie){var e=new RegExp(f+"=[a-zA-Z0-9]{0,};{0,1}","g"),c=document.cookie.match(e),d,g;if(c&&c[0]){d=new RegExp("("+f+"=|;)","g");g=c[0].replace(d,"");return g}}return""};a.Slk.prototype.createCookie=function(f,h,g,d){var e,c;if(document&&document.cookie){if(d){e=new Date();e.setTime(e.getTime()+(d*24*60*60*1000));c="; expires="+e.toGMTString()}else{c=""}document.cookie=f+"="+h+c+"; domain="+g+";path=/"}}}(window));(function(b){var a=b.RBS;a.Slk.prototype.bindShareButtons=function(){if(b.jQuery){var c=this,d=this.getSiteProduct()==="jogo-ao-vivo"?".tr-match-social a":"#zh-bloco-redes-sociais a";$("#document").ready(function(){$(d).on("click",function(f){c.sendShareEvent(this.href,f)})})}};a.Slk.prototype.sendShareEvent=function(i,d){var j=/.*twitter\.com.*/,c=/.*facebook\.com.*/,f=/.*plus\.google\.com.*/,e=/.*mailto:.*/,h,g;if(i.match(j)){h="twitter"}else{if(i.match(c)){h="facebook"}else{if(i.match(f)){h="google_plus"}else{if(i.match(e)){h="mail"}}}}if(h){g={type:"share",social_media_site:h};if(h==="mail"){d.preventDefault();g.goToLink=i}this.sendEventData("share",g)}};a.Slk.prototype.sendComment=function(c){if(this.options.trackComments){this.sendEventData("comment",{type:"comment",commentId:c})}};a.Slk.prototype.sendEventData=function(e,d){var c=this,f=this.getDataToSend(d);if(this.options.trackUnlogged||this.getUsername().replace(/^\s+|\s+$/g,"")!==""){if(f&&f.traceData){f=this.includeAdditionalInfo(f.traceData.product.subproduct||f.traceData.product,f)}if(e==="open"){this.sendDataByHttp(this.URL+"/open",JSON.stringify(f),function(g){if(g&&g.data){c.setUserData(g.data)}})}else{if(e==="share"){f.eventData.shareDetails={shareSite:d.social_media_site};this.sendDataByHttp(this.URL+"/share",JSON.stringify(f),function(){if(d.goToLink){b.location.assign(d.goToLink)}})}else{if(e==="comment"){f.eventData.commentDetails={commendId:d.commentId};this.sendDataByHttp(this.URL+"/comment",JSON.stringify(f))}}}}};a.Slk.prototype.includeAdditionalInfo=function(d,c){c.traceData.tags=this.getTags();if(d==="noticia"){c.traceData.datePublished=this.getDatePublished();c.traceData.newsDetails={newsId:this.getNewsId(),newsTitle:this.getNewsTitle(),session:this.getSessionName()}}else{if(d==="tabelas"){c.traceData.tableDetail={championship:c.traceData.pageTitle}}else{if(d==="fotos"){c.traceData.datePublished=this.getDatePublished()}else{if(d==="jogo-ao-vivo"){c.traceData.tempoRealDetail={championship:this.getTempoRealChampionship(),homeTeam:this.getTempoRealHomeTeam(),visitorTeam:this.getTempoRealVisitorTeam(),gameDate:this.getTempoRealGameDate()}}else{if(d==="busca"){c.traceData.searchDetails={term:this.getSearchTerm()}}}}}}return c}}(window));(function(b){var a=b.RBS;a.Slk.prototype.getUsername=function(){var c,d="";if(document&&document.cookie){c=document.cookie.match(/cdmuser=[a-zA-Z0-9]{0,};{0,1}/g)}if(c&&c[0]){d=c[0].replace(/(cdmuser=|;)/g,"")}return d};a.Slk.prototype.getDataToSend=function(c){var d={user:{username:this.getUsername(),localId:this.getUserLocalId()},traceData:{userAgent:b.navigator.userAgent,site:this.getSiteName(),pageUrl:document.URL,pageTitle:this.getPageTitle(),referral:document.referrer,product:{name:this.getSiteName(),subproduct:this.getSiteProduct()}},eventData:{eventType:c.type}};return d};a.Slk.prototype.getTags=function(){var c="";if(b.slk_data&&b.slk_data.tags){c=b.slk_data.tags}return c};a.Slk.prototype.getDatePublished=function(){var c="";if(b.slk_data&&b.slk_data.datePublished){c=b.slk_data.datePublished}return c};a.Slk.prototype.getPageTitle=function(){var c="";c=document.title;return c};a.Slk.prototype.getNewsTitle=function(){var c="";if(b.slk_data&&b.slk_data.title){c=b.slk_data.title}return c};a.Slk.prototype.getNewsId=function(){var c="";if(b.slk_data&&b.slk_data.id){c=b.slk_data.id}return c};a.Slk.prototype.getSessionName=function(d){d=d||b.location.href||"";var e=d.match(/\/[a-z]{2}\/[a-z]{1,}\/[0-9]{0,}/),c="";if(e&&e[0]){c=e[0].replace(/(\/[a-z]{2}\/|\/[0-9]{0,})/g,"")}return c};a.Slk.prototype.getElapsedTime=function(){var d=new Date().getTime(),c;if(this.initialTime){c=d-this.initialTime}return c};a.Slk.prototype.getSiteName=function(){var c="";if(b.slk_data&&b.slk_data.site){c=b.slk_data.site}return c};a.Slk.prototype.getSiteProduct=function(){var c="";if(b.slk_data&&b.slk_data.produto){c=b.slk_data.produto}return c};a.Slk.prototype.getUserId=function(){var c=null;if(this.userId){c=this.userId}return c};a.Slk.prototype.getUserLocalId=function(){var d="slk_localId",c=this.getCookie(d);if(!c||c===""||c===null){c=Math.random().toString(36).substr(2)+Math.random().toString(36).substr(2);this.createCookie(d,c,".clicrbs.com.br",7200)}return c};a.Slk.prototype.getTempoRealChampionship=function(){return $("body").attr("data-championship")};a.Slk.prototype.getSearchTerm=function(){return b.decodeURIComponent(b.location.search.replace("?busca=","").replace(/\+/g," "))};a.Slk.prototype.getTempoRealHomeTeam=function(){var c=$("body").attr("data-game");return c.replace(/-e-[a-zA-Z0-9]{0,}/g,"")};a.Slk.prototype.getTempoRealVisitorTeam=function(){var c=$("body").attr("data-game");return c.replace(/[a-zA-Z0-9]{0,}-e-/g,"")};a.Slk.prototype.getTempoRealGameDate=function(){var c=$("body").attr("data-gameDate"),f=c.replace(/-[0-9]{2}-[0-9]{4}/,""),h=c.replace(/[0-9]{2}-/,"").replace(/-[0-9]{4}/,""),g=c.replace(/[0-9]{2}-[0-9]{2}-/,""),e=$("body").attr("data-gameHour"),i=new Date(g,h-1,f,e.slice(0,2),e.slice(2,4),"0","0");return i}}(window));(function(b){var a=b.RBS;a.Slk.prototype.sendDataByHttp=function(d,f,g){if(this.use_xdomain&&xhook){xhook.enable()}var c=this,e=new XMLHttpRequest();e.open("POST",d);e.onreadystatechange=function(){if(e.readyState===4){if(g){g({status:this?this.status:null,data:c.use_xdomain?e.responseText:(this?this.response:null)})}}};e.send(f);if(this.use_xdomain&&xhook){xhook.disable()}}}(window));
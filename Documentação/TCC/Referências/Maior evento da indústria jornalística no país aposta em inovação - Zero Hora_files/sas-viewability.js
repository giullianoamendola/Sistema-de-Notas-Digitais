var sas=sas||{};(function(){sas.viewability=sas.viewability||{};var k;var j=100;var i=false;var h=[];var c=50;var d=1;var g=document.hasFocus!=null?document.hasFocus():true;var l=function(){};var n={HIDDEN:1,SEMI_VISIBLE:2,VISIBLE:3};sas.events.addEvent(window,"focus",function(){g=true});sas.events.addEvent(window,"blur",function(){g=false});var m={NOT_IN_IFRAME:1,FRIENDLY_IFRAME:2,CROSS_DOMAIN_IFRAME:3,WRONG_SIZE:4};var e=function(s){var t={status:m.NOT_IN_IFRAME,element:s};if(window.top!=window.self){t.status=m.FRIENDLY_IFRAME;try{var p=s;var q=window;while(q!=null&&q.top!=q.self){if(a(q.frameElement)<a(p)){t.status=m.WRONG_SIZE;break}p=q.frameElement;q=q.parent}t.element=p}catch(r){t.status=m.CROSS_DOMAIN_IFRAME}}return t};sas.viewability.register=function(q,p,s){if(q==null||p==null){return}s=s||{};s.duration=s.duration||d;s.area=s.area||c;s.triggerOnce=s.triggerOnce!=null?s.triggerOnce:true;s.onHidden=s.onHidden||l;s.onSemiVisible=s.onSemiVisible||l;s.onVisible=s.onVisible||l;s.onError=s.onError||l;var r=e(q);if(r.status==m.CROSS_DOMAIN_IFRAME||m.status==m.WRONG_SIZE){s.onError();return}else{q=r.element}h.push({element:q,callback:p,options:s,tick:0,requiredTick:Math.round((s.duration*1000)/j)+1});if(!i){i=true;k=window.setInterval(function(){for(var t=0;t<h.length;t++){b(h[t])}},j)}};var b=function(p){if(p.disabled){return}var q=f(p);switch(q){case n.HIDDEN:p.tick=0;if(p.state!=q){p.options.onHidden(p.element)}break;case n.SEMI_VISIBLE:p.tick=0;if(p.state!=q){p.options.onSemiVisible(p.element)}break;case n.VISIBLE:p.tick++;if(p.state!=q){p.options.onVisible(p.element)}break;default:return}p.state=q;if(p.tick==p.requiredTick){p.callback();p.tick=0;if(p.options.triggerOnce){p.disabled=true}}};var f=function(p){if(!g){return n.HIDDEN}var q=o(p.element);if(q>=p.options.area){return n.VISIBLE}else{if(q<=0){return n.HIDDEN}else{return n.SEMI_VISIBLE}}};var a=function(p){var q=p.getBoundingClientRect();return(q.right-q.left)*(q.bottom-q.top)};var o=function(r){var q=r.ownerDocument;var v=q.defaultView||q.parentWindow;var y=v.innerWidth!=null?v.innerWidth:q.documentElement.clientWidth;var x=v.innerHeight!=null?v.innerHeight:q.documentElement.clientHeight;var s=r.getBoundingClientRect();var p=(s.right-s.left)*(s.bottom-s.top);if(p==0){return 0}var t=Math.max(0,Math.min(s.bottom,x)-Math.max(0,s.top));var u=Math.max(0,Math.min(s.right,y)-Math.max(0,s.left));return Math.round(t*u*100/p)}})();
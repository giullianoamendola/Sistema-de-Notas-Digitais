!function(e){"use strict";var t={getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,t,n,o,s,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var r="";if(n)switch(n.constructor){case Number:r=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:r="; expires="+n;break;case Date:r="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+r+(s?"; domain="+s:"")+(o?"; path="+o:"")+(i?"; secure":""),!0},removeItem:function(e,t,n){return this.hasItem(e)?(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0):!1},hasItem:function(e){return e?new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):!1},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,n=0;t>n;n++)e[n]=decodeURIComponent(e[n]);return e}},n={login:"/wrs/api/session",update:"/wrs/action/update/loadUser"},o=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},s=function(e,t,n,s,i){var r=new XMLHttpRequest;r.open(e,t),"POST"===e&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.onload=function(){if(r.status>=200&&r.status<400){var e=JSON.parse(r.responseText);"function"==typeof s&&s(e)}else if("function"==typeof i){var t=-1!==r.responseText.indexOf(":")?JSON.parse(r.responseText):"";i(r.status,r.statusText,t.status?t.status:t)}},r.ontimeout=function(){if("function"==typeof i){-1!==r.responseText.indexOf(":")?JSON.parse(r.responseText):"";i({error:!0,type:"timeout",message:"Request fail, timeout."})}},void 0===typeof n||null===n?r.send():(n=o(n),r.send(n))},i=function(e,t){for(var n=0,o=e.length;o>n;n++)if(e[n].rel===t)return e[n].href},r=function(e,t,n){void 0!==typeof n&&(t+="; expires="+n),document.cookie=e+"="+t+"; domain=.clicrbs.com.br; path=/;",document.cookie=e+"="+t+"; path=/;"},c=function(){var e=12096e5,t=Date.now(),n=new Date(t+e);return n.toUTCString()},u=function(){};u.init=function(e){var t=new this;return t.initialize(e),t},u.prototype={settings:{siteID:null,links:{}},initialize:function(e){this.settings.siteID=e},login:function(t,o,a,p,f){var l=this,m=m||"http://www.clicrbs.com.br";s("POST",m+n.login,{userID:t,password:o,site:u.prototype.settings.siteID,stayLogged:a},function(t){var n,o=t.status,s=t.token,u=u||"http://www.clicrbs.com.br";a&&(n=c());try{r("wrs",encodeURIComponent(s),n)}catch(f){console.log(f)}switch(o){case"STATUS_USER_AUTHENTICATED_DUPLICATED_ACCOUNT":e.location=u+i(t._links,"normalize");break;case"STATUS_USER_AUTHENTICATED":l.settings.links.userInfo=i(t._links,"user")}"function"==typeof p&&p(o,s)},function(e,t,n){console.log(e,t,n),"function"==typeof f&&f(e,t,n)})},getUserInfo:function(t){var n=this,o=o||"http://www.clicrbs.com.br";s("GET",o+n.settings.links.userInfo,null,function(o){n.settings.links.subscriptions=i(o._links,"subscriptions"),e.RBSDEV_API&&(e.usr=e.usr||RBSDEV_API.getInstance(),e.usr.nome=o.givenName,e.usr.sobrenome=o.familyName,e.usr.email=o.email),"function"==typeof t&&t(o)})},getUserSubscription:function(t,n,o){var i=this,r=o?"?jornal="+o:"",c=c||"http://www.clicrbs.com.br";s("GET",c+i.settings.links.subscriptions+r,null,function(n){e.RBSDEV_API&&(e.usr=e.usr||RBSDEV_API.getInstance());for(var o=n.subscriptions.length-1;o>=0;o--){var s=n.subscriptions[o];"ZH"===s.name&&(e.usr.usr_assinatura.tipo_assinatura=s.alternateName)}"function"==typeof t&&t(n)},function(e,t,o){"function"==typeof n&&n(e,t,o)})},getLoggedUser:function(e,o){var u,a=this,p=t.getItem("wrs"),f=f||"http://www.clicrbs.com.br",l={};p&&""!==p&&(l.token=decodeURIComponent(p)),p&&null!=p?s("POST",f+n.login,l,function(t){a.settings.links.userInfo=i(t._links,"user"),t.stayLogged&&(u=c());try{r("wrs",encodeURIComponent(t.token),u)}catch(n){console.log(n)}"function"==typeof e&&e(t)},function(e,t,n){"function"==typeof o&&o(e,t,n)}):"function"==typeof o&&o(409,"","")},update:function(t){var o="",s=s||"http://www.clicrbs.com.br";o="?url="+encodeURIComponent(t),e.location=s+n.update+o},logout:function(e){var t=this;r("wrs","","Thu, 01 Jan 1970 00:00:00 GMT"),r("socialLogged","","Thu, 01 Jan 1970 00:00:00 GMT"),t.settings.links={},"function"==typeof e&&e()}},e.Wrs=u}(window);